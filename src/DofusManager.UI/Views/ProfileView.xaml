<UserControl x:Class="DofusManager.UI.Views.ProfileView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Création de profil -->
        <GroupBox Grid.Row="0" Header="Nouveau profil" Margin="0,0,0,10" Padding="5">
            <StackPanel Orientation="Horizontal">
                <TextBox Text="{Binding NewProfileName, UpdateSourceTrigger=PropertyChanged}"
                         Width="200" Margin="0,0,5,0"
                         VerticalContentAlignment="Center" />
                <Button Content="Créer depuis config actuelle"
                        Command="{Binding CreateProfileCommand}"
                        Padding="10,5" />
            </StackPanel>
        </GroupBox>

        <!-- Liste des profils -->
        <GroupBox Grid.Row="1" Header="Profils enregistrés" Margin="0,0,0,10" Padding="5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <ListBox Grid.Column="0"
                         ItemsSource="{Binding Profiles}"
                         SelectedItem="{Binding SelectedProfile}"
                         Height="100"
                         Margin="0,0,5,0">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding ProfileName}" FontWeight="Bold" Margin="0,0,10,0" />
                                <TextBlock Text="{Binding SlotCount, StringFormat='({0} slots)'}" Foreground="Gray" />
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <Button Content="Charger"
                            Command="{Binding LoadProfileCommand}"
                            Padding="10,5" Margin="0,0,0,5" />
                    <Button Content="Sauvegarder"
                            Command="{Binding SaveProfileCommand}"
                            Padding="10,5" Margin="0,0,0,5" />
                    <Button Content="Supprimer"
                            Command="{Binding DeleteProfileCommand}"
                            Padding="10,5" />
                </StackPanel>
            </Grid>
        </GroupBox>

        <!-- Slots du profil sélectionné -->
        <DataGrid Grid.Row="2"
                  ItemsSource="{Binding Slots}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  SelectionMode="Single"
                  GridLinesVisibility="Horizontal"
                  AlternatingRowBackground="#F5F5F5">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Slot" Binding="{Binding Index}" Width="50" />
                <DataGridTextColumn Header="Personnage" Binding="{Binding CharacterName}" Width="*" />
                <DataGridTextColumn Header="Pattern" Binding="{Binding WindowTitlePattern}" Width="150" />
                <DataGridCheckBoxColumn Header="Leader" Binding="{Binding IsLeader}" Width="60" />
                <DataGridTextColumn Header="Touche" Binding="{Binding FocusHotkey}" Width="70" />
            </DataGrid.Columns>
        </DataGrid>

        <!-- Info -->
        <TextBlock Grid.Row="3" Margin="0,10,0,0" Foreground="Gray" TextWrapping="Wrap"
                   Text="'Créer' capture la configuration actuelle (fenêtres, leader, hotkeys). 'Charger' réapplique le profil en matchant les titres de fenêtre." />

        <!-- Statut -->
        <StatusBar Grid.Row="4" Margin="0,10,0,0">
            <StatusBarItem Content="{Binding StatusText}" />
        </StatusBar>
    </Grid>
</UserControl>
