<Window x:Class="DofusManager.UI.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:DofusManager.UI.ViewModels"
        xmlns:views="clr-namespace:DofusManager.UI.Views"
        Title="DofusManager" Height="500" Width="750"
        WindowStartupLocation="CenterScreen">

    <TabControl Margin="5">
        <!-- Onglet Fenêtres (F1) -->
        <TabItem Header="Fenêtres" DataContext="{Binding}">
            <Grid Margin="10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!-- Barre d'actions -->
                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                    <Button Content="Rafraîchir"
                            Command="{Binding RefreshCommand}"
                            Padding="10,5" Margin="0,0,5,0" />
                    <Button Content="{Binding PollingButtonText}"
                            Command="{Binding TogglePollingCommand}"
                            Padding="10,5" />
                </StackPanel>

                <!-- Liste des fenêtres -->
                <DataGrid Grid.Row="1"
                          ItemsSource="{Binding Windows}"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          SelectionMode="Single"
                          CanUserSortColumns="True"
                          GridLinesVisibility="Horizontal"
                          AlternatingRowBackground="#F5F5F5">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="PID" Binding="{Binding ProcessId}" Width="70" />
                        <DataGridTextColumn Header="Titre" Binding="{Binding Title}" Width="*" />
                        <DataGridTextColumn Header="État" Width="100"
                                            Binding="{Binding IsMinimized, Converter={x:Static vm:BoolToStateConverter.Instance}}" />
                        <DataGridTextColumn Header="Écran" Binding="{Binding ScreenName}" Width="120" />
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Barre de statut -->
                <StatusBar Grid.Row="2" Margin="0,10,0,0">
                    <StatusBarItem Content="{Binding StatusText}" />
                </StatusBar>
            </Grid>
        </TabItem>

        <!-- Onglet Raccourcis (F2) -->
        <TabItem Header="Raccourcis">
            <views:HotkeyView DataContext="{Binding HotkeyViewModel}" />
        </TabItem>

        <!-- Onglet Profils (F3) -->
        <TabItem Header="Profils">
            <views:ProfileView DataContext="{Binding ProfileViewModel}" />
        </TabItem>
    </TabControl>
</Window>
